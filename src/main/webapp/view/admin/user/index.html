#@admin_body(title='用户管理', name="用户")

#define main_body()
<table id="user" class="layui-table"></table>
#end

#define js()
<script>
    layui.use(['jquery', 'element', 'table', 'layer', 'laytpl', 'form'], function () {
        var table = layui.table;
        var $ = layui.$;
        var layer = layui.layer;
        var laytpl = layui.laytpl;
        var form = layui.form;

        table.render({
            elem: '#user'
            , url: '/admin/user/paginate' //数据接口
            , page: true //开启分页
            , cols: [[ //表头
                {type:'checkbox'}
                ,{field: 'id', title: 'ID', sort: true, width: '8%'}
                , {field: 'username', title: '用户名'}
                , {field: 'type', title: '用户类型', width: '10%'}
                , {field: 'email', title: '邮箱', width: '17%'}
                , {field: 'mobile', title: '手机号', width: '16%'}
                , {field: 'createDate', title: '注册日期', width: '17%'}
                , {toolbar: '#barDemo', title: '操作', width: '17%'}

            ]]
        });
        $(".search").click(function () {
            var keyword = $("#search").val();
            table.render({
                elem: '#user'
                , url: '/admin/user/search' //数据接口
                , method: "post"
                , where: {keyword: keyword}
                , page: true //开启分页
                , cols: [[ //表头
                    {field: 'id', title: 'ID', sort: true, fixed: 'left', width: '10%'}
                    , {field: 'username', title: '用户名'}
                    , {field: 'type', title: '用户类型', width: '10%'}
                    , {field: 'email', title: '邮箱', width: '17%'}
                    , {field: 'mobile', title: '手机号', width: '16%'}
                    , {field: 'createDate', title: '注册日期', width: '17%'}
                    , {toolbar: '#barDemo', title: '操作', width: '17%'}

                ]]
            });
        });
        $(".add_obj").click(function () {
            laytpl($("#addUser").html()).render({}, function (html) {
                layer.open({
                    title: '创建用户',
                    type: 1,
                    area: ['450px', '400px'],
                    shadeClose: false, //点击遮罩关闭
                    content: html
                });
                form.render();
            });
        });


    });

</script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
    <a class="layui-btn layui-btn-warm layui-btn-xs" lay-event="resume">恢复</a>
</script>

<script type="text/html" id="addUser">
    <div class="row">
        <div class="add-user">
            <form class="layui-form" action="">
                <div class="layui-form-item">
                    <label class="layui-form-label">用户名</label>
                    <div class="layui-input-block">
                        <input name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题"
                               class="layui-input" type="text">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">密码</label>
                    <div class="layui-input-block">
                        <input name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题"
                               class="layui-input" type="text">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">用户类型</label>
                    <div class="layui-input-block">
                        <select name="interest" lay-filter="aihao">
                            <option value=""></option>
                            <option value="0">写作</option>
                            <option value="1" selected="">阅读</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">邮箱</label>
                    <div class="layui-input-block">
                        <input name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题"
                               class="layui-input" type="text">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">手机号</label>
                    <div class="layui-input-block">
                        <input name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题"
                               class="layui-input" type="text">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit="" lay-filter="demo1">创建用户</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

</script>
#end

#define admin_css()

<style>
    .add-user{
        padding-top: 5%;
        padding-right: 10%;
    }
    .layui-table-cell .layui-form-checkbox[lay-skin="primary"] {
        top: 0px;
    }
    .laytable-cell-checkbox, .laytable-cell-numbers, .laytable-cell-space {
        padding: 5px;
        text-align: center;
    }
</style>
#end
